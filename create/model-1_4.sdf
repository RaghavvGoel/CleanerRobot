<?xml version="1.0" ?>
<sdf version="1.4">
  <model name="create">

    <link name="base">
      <inertial>
        <pose>0.001453 -0.000453 0.029787 0 0 0</pose>
        <inertia>
          <ixx>0.058640</ixx>
          <ixy>0.000124</ixy>
          <ixz>0.000615</ixz>
          <iyy>0.058786</iyy>
          <iyz>0.000014</iyz>
          <izz>1.532440</izz>
        </inertia>
        <mass>2.234000</mass>
      </inertial>

      <collision name="base_collision">
        <pose>0.016495 0 0.047800 0 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.016495</radius>
            <length>0.061163</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="base_visual">
        <pose>0 0 0.047800 0 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://create/meshes/create_body.dae</uri>
          </mesh>  
        </geometry>
      </visual>
		
			<!--	<sensor name="base_contact_sensor" type="contact">
				<contact>	
					<collision>base_collision</collision>
				</contact> 
				<plugin name="base_contact_sensor" filename="libgazebo_ros_bumper.so">
				<bumperTopicName>base_contact_sensor_state</bumperTopicName>
				<always_on>true</always_on>
				<visualize>true</visualize>
				<update_rate>10.0</update_rate>	
				<frameName>base</frameName>
				</plugin> 
				</sensor>
		-->
      <collision name="front_wheel_collision">
        <pose>0.130000 0 0.017000 0 1.570700 1.570700</pose>
        <geometry>
          <sphere>
            <radius>0.018000</radius>
          </sphere>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0</mu>
              <mu2>0</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="front_wheel_visual">
        <pose>0.130000 0 0.017000 0 1.570700 1.570700</pose>
        <geometry>
          <sphere>
            <radius>0.009000</radius>
          </sphere>
        </geometry>
      </visual>

      <collision name="rear_wheel_collision">
        <pose>-0.13 0 0.017 0 1.5707 1.5707</pose>
        <geometry>
          <sphere>
            <radius>0.015000</radius>
          </sphere>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0</mu>
              <mu2>0</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="rear_wheel_visual">
        <pose>-0.130000 0 0.017000 0 1.570700 1.570700</pose>
        <geometry>
          <sphere>
            <radius>0.007500</radius>
          </sphere>
        </geometry>
      </visual>


      <sensor name="left_cliff_sensor" type="ray">
        <pose>0.070000 0.140000 0.027000 0 1.570790 0</pose>
        <ray>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1.000000</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.010000</min>
            <max>0.040000</max>
            <resolution>0.100000</resolution>
          </range>
        </ray>
      </sensor>

      <sensor name="leftfront_cliff_sensor" type="ray">
        <pose>0.150000 0.040000 0.027000 0 1.570790 0</pose>
        <ray>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1.000000</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.010000</min>
            <max>0.040000</max>
            <resolution>0.100000</resolution>
          </range>
        </ray>
      </sensor>

      <sensor name="right_cliff_sensor" type="ray">
        <pose>0.070000 -0.140000 0.027000 0 1.570790 0</pose>
        <ray>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1.000000</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.010000</min>
            <max>0.040000</max>
            <resolution>0.100000</resolution>
          </range>
        </ray>
      </sensor>

      <sensor name="rightfront_cliff_sensor" type="ray">
        <pose>0.150000 -0.040000 0.027000 0 1.570790 0</pose>
        <ray>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1.000000</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.010000</min>
            <max>0.040000</max>
            <resolution>0.100000</resolution>
          </range>
        </ray>
      </sensor>

      <sensor name="wall_sensor" type="ray">
        <pose>0.090000 -0.120000 0.059000 0 0 -1.000000</pose>
        <ray>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1.000000</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
          </scan>
          <range>
            <min>0.016000</min>
            <max>0.040000</max>
            <resolution>0.100000</resolution>
          </range>
        </ray>
      </sensor>
    </link>


    <link name="left_wheel">
      <pose>0 0.130000 0.032000 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>0.001000</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.001000</iyy>
          <iyz>0</iyz>
          <izz>0.001000</izz>
        </inertia>
        <mass>0.010000</mass>
      </inertial>
      <collision name="collision">
        <pose>0 0 0 0 1.570700 1.570700</pose>
        <geometry>
          <cylinder>
            <radius>0.033000</radius>
            <length>0.023000</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>10</mu>
              <mu2>10</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="visual">
        <pose>0 0 0 0 1.570700 1.570700</pose>
        <geometry>
          <cylinder>
            <radius>0.033000</radius>
            <length>0.023000</length>
          </cylinder>
        </geometry>
      </visual>
    </link>

    <link name="right_wheel">
      <pose>0 -0.130000 0.032000 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>0.001000</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>0.001000</iyy>
          <iyz>0</iyz>
          <izz>0.001000</izz>
        </inertia>
        <mass>0.010000</mass>
      </inertial>
      <collision name="collision">
        <pose>0 0 0 0 1.570700 1.570700</pose>
        <geometry>
          <cylinder>
            <radius>0.033000</radius>
            <length>0.023000</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>10</mu>
              <mu2>10</mu2>
              <fdir1>0 0 0</fdir1>
              <slip1>0</slip1>
              <slip2>0</slip2>
            </ode>
          </friction>
        </surface>
      </collision>
      <visual name="visual">
        <pose>0 0 0 0 1.570700 1.570700</pose>
        <geometry>
          <cylinder>
            <radius>0.033000</radius>
            <length>0.023000</length>
          </cylinder>
        </geometry>
      </visual>
    </link>

		<link name="front_bumper">
			<collision name="bumper_collision">
				<pose>0.01 0 0.047800 0 0 0</pose>
				<geometry>
					<cylinder>
						<radius>0.161495</radius>
						<length>0.061163</length> 
						 </cylinder>   
				<!--	<box>
						<size>0.32 0.32 0.06</size>
					</box>  -->
				</geometry>
			</collision>
			<visual name="bumper_visual">
				<pose>0.01 0 0.047800 0 0 0</pose>
				<geometry>
				      <!--  <box>
        					<size>0.22 0.22 0.06</size>
        				</box> -->
					<mesh>
						<uri>model://create/meshes/bumper.dae</uri>
					</mesh> 
				</geometry>
			</visual>

			<sensor name="bumper_contact_sensor" type="contact">
				<contact>	
					<collision>bumper_collision</collision>
					<topic>bumper_contact_sensor_state</topic>
				</contact>
				<plugin name="bumper_contact_sensor" filename="libgazebo_ros_bumper.so">
				<bumperTopicName>bumper_contact_sensor_state</bumperTopicName>
				<always_on>true</always_on>
				<visualize>true</visualize>
				<update_rate>10.0</update_rate>	
				<frameName>bumper</frameName>
				</plugin> 
			</sensor>
		</link>  


<joint name="front_bumper" type="revolute">
	<parent>base</parent>
	<child>front_bumper</child>
	<axis>
		<xyz>0 0 0</xyz>
		 <limit>
            <upper>0</upper>
            <lower>0</lower>
        </limit> 
	</axis>
</joint>  



  <!-- Camera -->
<!--  <link name="camera_link">
    <collision name="camera_collision">
	<pose>0 0 0.087800 0.029787 0 0</pose>
    <geometry>
    <box> 
    <size>0.1 0.1 0.1</size>
    </box>
      </geometry>
    </collision>

    <visual name="camera_visual">
	<pose>0 0 0.087800 0 0 0</pose>      
    <geometry>
    <box> 
    <size>0.1 0.1 0.1</size>
    </box>
    </geometry>
    <material>red</material>
    </visual>

    <inertial>
      <mass>1e-5</mass>
       <inertia>
          <ixx>1e-6</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>1e-6</iyy>
          <iyz>0</iyz>
          <izz>1e-6</izz>
        </inertia>
    </inertial>

 <sensor name="camera1" type="camera">
 	<pose>0 0 0.147800 0 0 0</pose>

      <update_rate>30.0</update_rate>
      <camera name="head">
        <horizontal_fov>1.3962634</horizontal_fov>
        <image>
          <width>800</width>
          <height>800</height>
          <format>R8G8B8</format>
        </image>
        <clip>
          <near>0.02</near>
          <far>300</far>
        </clip>
        <noise>
          <type>gaussian</type>
          <!-- Noise is sampled independently per pixel on each frame.
               That pixel's noise value is added to each of its color
               channels, which at that point lie in the range [0,1]. -->
    -->
    <!--      <mean>0.0</mean>
          <stddev>0.007</stddev>
        </noise>
      </camera>
      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
        <alwaysOn>true</alwaysOn>
        <updateRate>0.0</updateRate>
        <cameraName>/Me/camera1</cameraName>
        <imageTopicName>image_raw</imageTopicName>
        <cameraInfoTopicName>camera_info</cameraInfoTopicName>
        <frameName>camera_link</frameName>
        <hackBaseline>0.07</hackBaseline>
        <distortionK1>0.0</distortionK1>
        <distortionK2>0.0</distortionK2>
        <distortionK3>0.0</distortionK3>
        <distortionT1>0.0</distortionT1>
        <distortionT2>0.0</distortionT2>
      </plugin>
    </sensor>

  </link>
-->
    <joint name="left_wheel" type="revolute">
      <parent>base</parent>
      <child>left_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>

    <joint name="right_wheel" type="revolute">
      <parent>base</parent>
      <child>right_wheel</child>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>

<!--<joint name="camera_joint" type="revolute">
    <parent>base</parent>
    <child>camera_link</child>
	<axis> 
		<xyz>0 1 0</xyz> 
	   <limit>
      	<upper>0</upper>
      	<lower>0</lower>
       </limit>
  	</axis>
	<pose>0 0 0.047800 0.1 0 0</pose>
 </joint>  -->

  <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
    <alwaysOn>true</alwaysOn>
    <updateRate>${update_rate}</updateRate>
    <leftJoint>right_wheel</leftJoint>
    <rightJoint>left_wheel</rightJoint>
    <wheelSeparation>0.5380</wheelSeparation>
    <wheelDiameter>0.2410</wheelDiameter>
    <torque>20</torque>
    <commandTopic>cmd_vel</commandTopic>
    <odometryTopic>odom</odometryTopic>
    <odometryFrame>odom</odometryFrame>
    <robotBaseFrame>base_footprint</robotBaseFrame>
  </plugin>  
  </model>
</sdf>

